{"version":3,"file":"index.js","sources":["../src/context.js","../src/hooks.js","../src/constants.js","../src/helpers.js","../src/lib.js","../src/create-reducer.js","../src/migrations.js","../src/persistence.js","../src/actions.js","../src/thunks.js","../src/listeners.js","../src/computed-properties.js","../src/effects.js","../src/extract-data-from-model.js","../src/create-store.js","../src/create-context-store.js","../src/create-transform.js","../src/provider.js","../src/use-local-store.js","../src/index.js"],"sourcesContent":["import { createContext } from 'react';\r\n\r\nconst StoreContext = createContext();\r\n\r\nexport default StoreContext;\r\n","import { useContext, useDebugValue, useEffect, useState } from 'react';\r\nimport EasyPeasyContext from './context';\r\n\r\nconst useNotInitialized = () => {\r\n  throw new Error('uSES not initialized!');\r\n};\r\nlet useSyncExternalStoreWithSelector = useNotInitialized;\r\nexport const initializeUseStoreState = (fn) => {\r\n  useSyncExternalStoreWithSelector = fn;\r\n};\r\n\r\nconst refEquality = (a, b) => a === b;\r\n\r\nexport function createStoreStateHook(Context) {\r\n  return function useStoreState(mapState, equalityFn = refEquality) {\r\n    if (process.env.NODE_ENV !== 'production') {\r\n      if (!mapState) {\r\n        throw new Error(`You must pass a selector to useStoreState`);\r\n      }\r\n      if (typeof mapState !== 'function') {\r\n        throw new Error(\r\n          `You must pass a function as a selector to useStoreState`,\r\n        );\r\n      }\r\n      if (typeof equalityFn !== 'function') {\r\n        throw new Error(\r\n          `You must pass a function as an equality function to useStoreState`,\r\n        );\r\n      }\r\n    }\r\n\r\n    const store = useContext(Context);\r\n\r\n    /*\r\n    function useSyncExternalStoreWithSelector<Snapshot, Selection>(\r\n        subscribe: (onStoreChange: () => void) => () => void,\r\n        getSnapshot: () => Snapshot,\r\n        getServerSnapshot: undefined | null | (() => Snapshot),\r\n        selector: (snapshot: Snapshot) => Selection,\r\n        isEqual?: (a: Selection, b: Selection) => boolean,\r\n    ): Selection;\r\n    */\r\n    const selectedState = useSyncExternalStoreWithSelector(\r\n      store.subscribe,\r\n      store.getState,\r\n      store.getState, // getServerSnapshot = getState\r\n      mapState,\r\n      equalityFn,\r\n    );\r\n\r\n    useDebugValue(selectedState);\r\n\r\n    return selectedState;\r\n  };\r\n}\r\n\r\nexport const useStoreState = createStoreStateHook(EasyPeasyContext);\r\n\r\nexport function createStoreActionsHook(Context) {\r\n  return function useStoreActions(mapActions) {\r\n    const store = useContext(Context);\r\n    return mapActions(store.getActions());\r\n  };\r\n}\r\n\r\nexport const useStoreActions = createStoreActionsHook(EasyPeasyContext);\r\n\r\nexport function createStoreDispatchHook(Context) {\r\n  return function useStoreDispatch() {\r\n    const store = useContext(Context);\r\n    return store.dispatch;\r\n  };\r\n}\r\n\r\nexport const useStoreDispatch = createStoreDispatchHook(EasyPeasyContext);\r\n\r\nexport function useStore() {\r\n  return useContext(EasyPeasyContext);\r\n}\r\n\r\nexport function createStoreRehydratedHook(Context) {\r\n  return function useStoreRehydrated() {\r\n    const store = useContext(Context);\r\n    const [rehydrated, setRehydrated] = useState(false);\r\n    useEffect(() => {\r\n      store.persist.resolveRehydration().then(() => setRehydrated(true));\r\n    }, []);\r\n    return rehydrated;\r\n  };\r\n}\r\n\r\nexport const useStoreRehydrated = createStoreRehydratedHook(EasyPeasyContext);\r\n\r\nexport function createTypedHooks() {\r\n  return {\r\n    useStoreActions,\r\n    useStoreDispatch,\r\n    useStoreState,\r\n    useStoreRehydrated,\r\n    useStore,\r\n  };\r\n}\r\n","export const actionSymbol = '$_a';\r\nexport const actionOnSymbol = '$_aO';\r\nexport const computedSymbol = '$_c';\r\nexport const effectOnSymbol = '$_e';\r\nexport const persistSymbol = '$_p';\r\nexport const reducerSymbol = '$_r';\r\nexport const thunkOnSymbol = '$_tO';\r\nexport const thunkSymbol = '$_t';\r\n","import { isDraft, current } from 'immer';\r\nimport {\r\n  actionOnSymbol,\r\n  actionSymbol,\r\n  computedSymbol,\r\n  effectOnSymbol,\r\n  persistSymbol,\r\n  reducerSymbol,\r\n  thunkOnSymbol,\r\n  thunkSymbol,\r\n} from './constants';\r\n\r\nexport const debug = (state) => {\r\n  if (isDraft(state)) {\r\n    return current(state);\r\n  }\r\n  return state;\r\n};\r\n\r\nexport const actionOn = (targetResolver, fn, config) => ({\r\n  [actionOnSymbol]: true,\r\n  fn,\r\n  targetResolver,\r\n  config,\r\n});\r\n\r\nexport const action = (fn, config) => ({\r\n  [actionSymbol]: true,\r\n  fn,\r\n  config,\r\n});\r\n\r\nconst defaultStateResolvers = [(state) => state];\r\n\r\nexport const computed = (fnOrStateResolvers, fn) => {\r\n  if (typeof fn === 'function') {\r\n    return {\r\n      [computedSymbol]: true,\r\n      fn,\r\n      stateResolvers: fnOrStateResolvers,\r\n    };\r\n  }\r\n  return {\r\n    [computedSymbol]: true,\r\n    fn: fnOrStateResolvers,\r\n    stateResolvers: defaultStateResolvers,\r\n  };\r\n};\r\n\r\nexport function effectOn(dependencyResolvers, fn) {\r\n  return {\r\n    [effectOnSymbol]: true,\r\n    dependencyResolvers,\r\n    fn,\r\n  };\r\n}\r\n\r\nexport function generic(value) {\r\n  return value;\r\n}\r\n\r\nexport const persist = (model, config) =>\r\n  // if we are not running in a browser context this becomes a no-op\r\n  typeof window === 'undefined'\r\n    ? model\r\n    : {\r\n        ...model,\r\n        [persistSymbol]: config,\r\n      };\r\n\r\nexport const thunkOn = (targetResolver, fn) => ({\r\n  [thunkOnSymbol]: true,\r\n  fn,\r\n  targetResolver,\r\n});\r\n\r\nexport const thunk = (fn) => ({\r\n  [thunkSymbol]: true,\r\n  fn,\r\n});\r\n\r\nexport const reducer = (fn, config) => ({\r\n  [reducerSymbol]: true,\r\n  fn,\r\n  config,\r\n});\r\n","import React from 'react';\r\nimport { Immer, isDraft } from 'immer';\r\n\r\n/**\r\n * We create our own immer instance to avoid potential issues with autoFreeze\r\n * becoming default enabled everywhere. We want to disable autofreeze as it\r\n * does not suit the design of Easy Peasy.\r\n * https://github.com/immerjs/immer/issues/681#issuecomment-705581111\r\n */\r\nlet easyPeasyImmer;\r\n\r\nexport function isPlainObject(obj) {\r\n  if (typeof obj !== 'object' || obj === null) return false;\r\n\r\n  let proto = obj;\r\n  while (Object.getPrototypeOf(proto) !== null) {\r\n    proto = Object.getPrototypeOf(proto);\r\n  }\r\n\r\n  return Object.getPrototypeOf(obj) === proto;\r\n}\r\n\r\nexport function clone(source) {\r\n  function recursiveClone(current) {\r\n    const next = Object.keys(current).reduce((acc, key) => {\r\n      if (Object.getOwnPropertyDescriptor(current, key).get == null) {\r\n        acc[key] = current[key];\r\n      }\r\n      return acc;\r\n    }, {});\r\n    Object.keys(next).forEach((key) => {\r\n      if (isPlainObject(next[key])) {\r\n        next[key] = recursiveClone(next[key]);\r\n      }\r\n    });\r\n    return next;\r\n  }\r\n  return recursiveClone(source);\r\n}\r\n\r\nexport function isPromise(x) {\r\n  return x != null && typeof x === 'object' && typeof x.then === 'function';\r\n}\r\n\r\nexport function get(path, target) {\r\n  return path.reduce(\r\n    (acc, cur) => (isPlainObject(acc) ? acc[cur] : undefined),\r\n    target,\r\n  );\r\n}\r\n\r\nexport function newify(currentPath, currentState, finalValue) {\r\n  if (currentPath.length === 0) {\r\n    return finalValue;\r\n  }\r\n  const newState = { ...currentState };\r\n  const key = currentPath[0];\r\n  if (currentPath.length === 1) {\r\n    newState[key] = finalValue;\r\n  } else {\r\n    newState[key] = newify(currentPath.slice(1), newState[key], finalValue);\r\n  }\r\n  return newState;\r\n}\r\n\r\nexport function set(path, target, value) {\r\n  if (path.length === 0) {\r\n    if (typeof value === 'object') {\r\n      Object.keys(target).forEach((key) => {\r\n        delete target[key];\r\n      });\r\n      Object.keys(value).forEach((key) => {\r\n        target[key] = value[key];\r\n      });\r\n    }\r\n    return;\r\n  }\r\n  path.reduce((acc, cur, idx) => {\r\n    if (idx + 1 === path.length) {\r\n      acc[cur] = value;\r\n    } else {\r\n      acc[cur] = acc[cur] || {};\r\n    }\r\n    return acc[cur];\r\n  }, target);\r\n}\r\n\r\nexport function createSimpleProduce(disableImmer = false) {\r\n  return function simpleProduce(path, state, fn, config) {\r\n    if ((config && 'immer' in config) ? config?.immer === false : disableImmer) {\r\n      const current = get(path, state);\r\n      const next = fn(current);\r\n      if (current !== next) {\r\n        return newify(path, state, next);\r\n      }\r\n      return state;\r\n    }\r\n    if (!easyPeasyImmer) {\r\n      easyPeasyImmer = new Immer({\r\n        // We need to ensure that we disable proxies if they aren't available\r\n        // on the environment. Users need to ensure that they use the enableES5\r\n        // feature of immer.\r\n        useProxies:\r\n          typeof Proxy !== 'undefined' &&\r\n          typeof Proxy.revocable !== 'undefined' &&\r\n          typeof Reflect !== 'undefined',\r\n        // Autofreezing breaks easy-peasy, we need a mixed version of immutability\r\n        // and mutability in order to apply updates to our computed properties\r\n        autoFreeze: false,\r\n      });\r\n    }\r\n    if (path.length === 0) {\r\n      const draft = easyPeasyImmer.createDraft(state);\r\n      const result = fn(draft);\r\n      if (result) {\r\n        return isDraft(result) ? easyPeasyImmer.finishDraft(result) : result;\r\n      }\r\n      return easyPeasyImmer.finishDraft(draft);\r\n    }\r\n    const parentPath = path.slice(0, path.length - 1);\r\n    const draft = easyPeasyImmer.createDraft(state);\r\n    const parent = get(parentPath, state);\r\n    const current = get(path, draft);\r\n    const result = fn(current);\r\n\r\n    if (result) {\r\n      parent[path[path.length - 1]] = result;\r\n    }\r\n    return easyPeasyImmer.finishDraft(draft);\r\n  };\r\n}\r\n\r\nconst pReduce = (iterable, reducer, initialValue) =>\r\n  new Promise((resolve, reject) => {\r\n    const iterator = iterable[Symbol.iterator]();\r\n    let index = 0;\r\n\r\n    const next = (total) => {\r\n      const element = iterator.next();\r\n\r\n      if (element.done) {\r\n        resolve(total);\r\n        return;\r\n      }\r\n\r\n      Promise.all([total, element.value])\r\n        .then((value) =>\r\n          // eslint-disable-next-line no-plusplus\r\n          next(reducer(value[0], value[1], index++)),\r\n        )\r\n        .catch((err) => reject(err));\r\n    };\r\n\r\n    next(initialValue);\r\n  });\r\n\r\nexport const pSeries = (tasks) => {\r\n  const results = [];\r\n  return pReduce(tasks, (_, task) =>\r\n    task().then((value) => {\r\n      results.push(value);\r\n    }),\r\n  ).then(() => results);\r\n};\r\n\r\nexport function areInputsEqual(newInputs, lastInputs) {\r\n  if (newInputs.length !== lastInputs.length) {\r\n    return false;\r\n  }\r\n  for (let i = 0; i < newInputs.length; i += 1) {\r\n    if (newInputs[i] !== lastInputs[i]) {\r\n      return false;\r\n    }\r\n  }\r\n  return true;\r\n}\r\n\r\nexport function useMemoOne(\r\n  // getResult changes on every call,\r\n  getResult,\r\n  // the inputs array changes on every call\r\n  inputs,\r\n) {\r\n  // using useState to generate initial value as it is lazy\r\n  const initial = React.useState(() => ({\r\n    inputs,\r\n    result: getResult(),\r\n  }))[0];\r\n\r\n  const committed = React.useRef(initial);\r\n\r\n  // persist any uncommitted changes after they have been committed\r\n\r\n  const isInputMatch = Boolean(\r\n    inputs &&\r\n      committed.current.inputs &&\r\n      areInputsEqual(inputs, committed.current.inputs),\r\n  );\r\n\r\n  // create a new cache if required\r\n  const cache = isInputMatch\r\n    ? committed.current\r\n    : {\r\n        inputs,\r\n        result: getResult(),\r\n      };\r\n\r\n  // commit the cache\r\n  React.useEffect(() => {\r\n    committed.current = cache;\r\n  }, [cache]);\r\n\r\n  return cache.result;\r\n}\r\n","import { isDraft, original } from 'immer';\r\nimport { createSimpleProduce, get } from './lib';\r\n\r\nexport default function createReducer(disableImmer, _aRD, _cR, _cP) {\r\n  const simpleProduce = createSimpleProduce(disableImmer);\r\n\r\n  const runActionReducerAtPath = (state, action, actionReducer, path, config) =>\r\n    simpleProduce(path, state, (draft) => actionReducer(draft, action.payload), config);\r\n\r\n  const reducerForActions = (state, action) => {\r\n    const actionReducer = _aRD[action.type];\r\n    if (actionReducer) {\r\n      return runActionReducerAtPath(\r\n        state,\r\n        action,\r\n        actionReducer,\r\n        actionReducer.def.meta.parent,\r\n        actionReducer.def.config,\r\n      );\r\n    }\r\n    return state;\r\n  };\r\n\r\n  const reducerForCustomReducers = (state, action) =>\r\n    _cR.reduce(\r\n      (acc, { parentPath, key, reducer, config }) =>\r\n        simpleProduce(parentPath, acc, (draft) => {\r\n          draft[key] = reducer(\r\n            isDraft(draft[key]) ? original(draft[key]) : draft[key],\r\n            action,\r\n          );\r\n          return draft;\r\n        }, config),\r\n      state,\r\n    );\r\n\r\n  const rootReducer = (state, action) => {\r\n    const stateAfterActions = reducerForActions(state, action);\r\n    const next =\r\n      _cR.length > 0\r\n        ? reducerForCustomReducers(stateAfterActions, action)\r\n        : stateAfterActions;\r\n    if (state !== next) {\r\n      _cP.forEach(({ parentPath, bindComputedProperty }) => {\r\n        const parentState = get(parentPath, next);\r\n        if (parentState != null) bindComputedProperty(parentState, next);\r\n      });\r\n    }\r\n    return next;\r\n  };\r\n\r\n  return rootReducer;\r\n}\r\n","import { produce, setAutoFreeze } from 'immer';\r\n\r\nexport const migrate = (\r\n  data,\r\n  migrations,\r\n) => {\r\n  setAutoFreeze(false);\r\n\r\n  let version = data._migrationVersion ?? 0;\r\n  const toVersion = migrations.migrationVersion\r\n\r\n  if (typeof version !== \"number\" || typeof toVersion !== 'number') {\r\n    throw new Error('No migration version found');\r\n  }\r\n\r\n  while (version < toVersion) {\r\n    const nextVersion = version + 1;\r\n    const migrator = migrations[nextVersion];\r\n\r\n    if (!migrator) {\r\n      throw new Error(`No migrator found for \\`migrationVersion\\` ${nextVersion}`);\r\n    }\r\n\r\n    data = produce(data, migrator);\r\n    data._migrationVersion = nextVersion;\r\n    version = data._migrationVersion;\r\n  }\r\n\r\n  setAutoFreeze(true);\r\n  return data;\r\n}\r\n","import { clone, get, isPlainObject, isPromise, set, pSeries } from './lib';\r\nimport { migrate } from './migrations';\r\n\r\nconst noopStorage = {\r\n  getItem: () => undefined,\r\n  setItem: () => undefined,\r\n  removeItem: () => undefined,\r\n};\r\n\r\nconst getBrowerStorage = (storageName) => {\r\n  let storageCache;\r\n  return () => {\r\n    if (!storageCache) {\r\n      try {\r\n        if (\r\n          typeof window !== 'undefined' &&\r\n          typeof window[storageName] !== 'undefined'\r\n        ) {\r\n          storageCache = window[storageName];\r\n        }\r\n      } catch (_) {\r\n        // swallow the failure\r\n      }\r\n      if (!storageCache) {\r\n        storageCache = noopStorage;\r\n      }\r\n    }\r\n\r\n    return storageCache;\r\n  };\r\n};\r\n\r\nconst localStorage = getBrowerStorage('localStorage');\r\nconst sessionStorage = getBrowerStorage('sessionStorage');\r\n\r\nfunction createStorageWrapper(storage, transformers = [], migrations = {}) {\r\n  if (storage == null) {\r\n    storage = sessionStorage();\r\n  }\r\n\r\n  if (typeof storage === 'string') {\r\n    if (storage === 'localStorage') {\r\n      storage = localStorage();\r\n    } else if (storage === 'sessionStorage') {\r\n      storage = sessionStorage();\r\n    } else {\r\n      if (process.env.NODE_ENV === 'development') {\r\n        // eslint-disable-next-line no-console\r\n        console.warn(`Invalid storage provider`);\r\n      }\r\n      storage = noopStorage;\r\n    }\r\n  }\r\n\r\n  const outTransformers = [...transformers].reverse();\r\n\r\n  const serialize = (data) => {\r\n    if (transformers.length > 0 && data != null && typeof data === 'object') {\r\n      Object.keys(data).forEach((key) => {\r\n        data[key] = transformers.reduce(\r\n          (acc, cur) => cur.in(acc, key, data),\r\n          data[key],\r\n        );\r\n      });\r\n    }\r\n\r\n    return storage === localStorage() || storage === sessionStorage()\r\n      ? JSON.stringify({ data })\r\n      : data;\r\n  };\r\n\r\n  const deserialize = (data) => {\r\n    const storageData =\r\n      storage === localStorage() || storage === sessionStorage()\r\n        ? JSON.parse(data).data\r\n        : data;\r\n\r\n    const hasMigrations = Object.keys(migrations).length > 0;\r\n    const result = hasMigrations\r\n      ? migrate(storageData, migrations)\r\n      : storageData;\r\n\r\n    if (\r\n      outTransformers.length > 0 &&\r\n      result != null &&\r\n      typeof result === 'object'\r\n    ) {\r\n      Object.keys(result).forEach((key) => {\r\n        result[key] = outTransformers.reduce(\r\n          (acc, cur) => cur.out(acc, key, result),\r\n          result[key],\r\n        );\r\n      });\r\n    }\r\n    return result;\r\n  };\r\n\r\n  const isAsync = isPromise(storage.getItem('_'));\r\n\r\n  return {\r\n    getItem: (key) => {\r\n      if (isAsync) {\r\n        return storage\r\n          .getItem(key)\r\n          .then((wrapped) =>\r\n            wrapped != null ? deserialize(wrapped) : undefined,\r\n          );\r\n      }\r\n      const wrapped = storage.getItem(key);\r\n      return wrapped != null ? deserialize(wrapped) : undefined;\r\n    },\r\n    setItem: (key, data) => storage.setItem(key, serialize(data)),\r\n    removeItem: (key) => storage.removeItem(key),\r\n  };\r\n}\r\n\r\nexport function extractPersistConfig(path, persistdef = {}) {\r\n  return {\r\n    path,\r\n    config: {\r\n      allow: persistdef.allow || [],\r\n      deny: persistdef.deny || [],\r\n      mergeStrategy: persistdef.mergeStrategy || 'mergeDeep',\r\n      storage: createStorageWrapper(\r\n        persistdef.storage,\r\n        persistdef.transformers,\r\n        persistdef.migrations,\r\n      ),\r\n    },\r\n  };\r\n}\r\n\r\nfunction resolvePersistTargets(target, allow, deny) {\r\n  let targets = Object.keys(target);\r\n  if (allow.length > 0) {\r\n    targets = targets.reduce((acc, cur) => {\r\n      if (allow.findIndex((x) => x === cur) !== -1) {\r\n        return [...acc, cur];\r\n      }\r\n      return acc;\r\n    }, []);\r\n  }\r\n  if (deny.length > 0) {\r\n    targets = targets.reduce((acc, cur) => {\r\n      if (deny.findIndex((x) => x === cur) !== -1) {\r\n        return acc;\r\n      }\r\n      return [...acc, cur];\r\n    }, []);\r\n  }\r\n  return targets;\r\n}\r\n\r\nfunction createPersistenceClearer(persistKey, _r) {\r\n  return () => {\r\n    if (_r._i._persistenceConfig.length === 0) {\r\n      return Promise.resolve();\r\n    }\r\n    return pSeries(\r\n      _r._i._persistenceConfig.map(\r\n        ({ path, config }) =>\r\n          () =>\r\n            Promise.resolve(config.storage.removeItem(persistKey(path))),\r\n      ),\r\n    );\r\n  };\r\n}\r\n\r\nexport function createPersistor(persistKey, _r) {\r\n  let persistPromise = Promise.resolve();\r\n  let isPersisting = false;\r\n  let nextPersistOperation;\r\n\r\n  const timingMethod =\r\n    typeof window === 'undefined'\r\n      ? (fn) => fn()\r\n      : window.requestIdleCallback != null\r\n      ? // We need to wrap requestIdleCallback, because it doesn't work without\r\n        // a second parameter on iOS with ReactNative\r\n        (fn) => window.requestIdleCallback(fn, { timeout: 0 })\r\n      : window.requestAnimationFrame;\r\n\r\n  const persist = (nextState) => {\r\n    if (_r._i._persistenceConfig.length === 0) {\r\n      return;\r\n    }\r\n\r\n    const operation = () => {\r\n      isPersisting = true;\r\n      persistPromise = new Promise((resolve) => {\r\n        timingMethod(() => {\r\n          pSeries(\r\n            _r._i._persistenceConfig.map(({ path, config }) => () => {\r\n              const { storage, allow, deny } = config;\r\n              const persistRootState = clone(get(path, nextState));\r\n              const persistTargets = resolvePersistTargets(\r\n                persistRootState,\r\n                allow,\r\n                deny,\r\n              );\r\n              const stateToPersist = {};\r\n              persistTargets.map((key) => {\r\n                const targetPath = [...path, key];\r\n                const rawValue = get(targetPath, nextState);\r\n                const value = isPlainObject(rawValue)\r\n                  ? clone(rawValue)\r\n                  : rawValue;\r\n                stateToPersist[key] = value;\r\n              });\r\n              return Promise.resolve(\r\n                storage.setItem(persistKey(path), stateToPersist),\r\n              );\r\n            }),\r\n          ).finally(() => {\r\n            isPersisting = false;\r\n            if (nextPersistOperation) {\r\n              const next = nextPersistOperation;\r\n              nextPersistOperation = null;\r\n              next();\r\n            } else {\r\n              resolve();\r\n            }\r\n          });\r\n        });\r\n      });\r\n    };\r\n\r\n    if (isPersisting) {\r\n      nextPersistOperation = operation;\r\n    } else {\r\n      operation();\r\n    }\r\n  };\r\n\r\n  return {\r\n    persist,\r\n    clear: createPersistenceClearer(persistKey, _r),\r\n    flush: () => {\r\n      if (nextPersistOperation) {\r\n        nextPersistOperation();\r\n      }\r\n      return persistPromise;\r\n    },\r\n  };\r\n}\r\n\r\nexport function createPersistMiddleware(persistor, _r) {\r\n  return ({ getState }) =>\r\n    (next) =>\r\n    (action) => {\r\n      const state = next(action);\r\n      if (\r\n        action &&\r\n        action.type !== '@action.ePRS' &&\r\n        _r._i._persistenceConfig.length > 0\r\n      ) {\r\n        persistor.persist(getState());\r\n      }\r\n      return state;\r\n    };\r\n}\r\n\r\nexport function rehydrateStateFromPersistIfNeeded(\r\n  persistKey,\r\n  replaceState,\r\n  _r,\r\n  root,\r\n) {\r\n  if (_r._i._persistenceConfig.length === 0) {\r\n    return Promise.resolve();\r\n  }\r\n\r\n  const state = clone(_r._i._dS);\r\n\r\n  let rehydrating = false;\r\n\r\n  return pSeries(\r\n    _r._i._persistenceConfig.map((persistInstance) => () => {\r\n      const { path, config } = persistInstance;\r\n      const { mergeStrategy, storage } = config;\r\n\r\n      if (root && (path.length < 1 || path[0] !== root)) {\r\n        return Promise.resolve();\r\n      }\r\n\r\n      const hasDataModelChanged = (dataModel, rehydratingModelData) =>\r\n        dataModel != null &&\r\n        rehydratingModelData != null &&\r\n        (typeof dataModel !== typeof rehydratingModelData ||\r\n          (Array.isArray(dataModel) && !Array.isArray(rehydratingModelData)));\r\n\r\n      const applyRehydrationStrategy = (persistedState) => {\r\n        if (mergeStrategy === 'overwrite') {\r\n          set(path, state, persistedState);\r\n        } else if (mergeStrategy === 'mergeShallow') {\r\n          const targetState = get(path, state);\r\n          Object.keys(persistedState).forEach((key) => {\r\n            if (hasDataModelChanged(targetState[key], persistedState[key])) {\r\n              // skip as the data model type has changed since the data was persisted\r\n            } else {\r\n              targetState[key] = persistedState[key];\r\n            }\r\n          });\r\n        } else if (mergeStrategy === 'mergeDeep') {\r\n          const targetState = get(path, state);\r\n          const setAt = (currentTargetState, currentPersistedState) => {\r\n            Object.keys(currentPersistedState).forEach((key) => {\r\n              if (\r\n                hasDataModelChanged(\r\n                  currentTargetState[key],\r\n                  currentPersistedState[key],\r\n                )\r\n              ) {\r\n                // skip as the data model type has changed since the data was persisted\r\n              } else if (isPlainObject(currentPersistedState[key])) {\r\n                currentTargetState[key] = currentTargetState[key] || {};\r\n                setAt(currentTargetState[key], currentPersistedState[key]);\r\n              } else {\r\n                currentTargetState[key] = currentPersistedState[key];\r\n              }\r\n            });\r\n          };\r\n          setAt(targetState, persistedState);\r\n        }\r\n      };\r\n\r\n      const rehydate = (persistedState) => {\r\n        if (persistedState != null) {\r\n          applyRehydrationStrategy(persistedState);\r\n          rehydrating = true;\r\n        }\r\n      };\r\n\r\n      const getItemResult = storage.getItem(persistKey(path));\r\n      if (isPromise(getItemResult)) {\r\n        return getItemResult.then(rehydate);\r\n      }\r\n      return Promise.resolve(rehydate(getItemResult));\r\n    }),\r\n  ).then(() => {\r\n    if (rehydrating) {\r\n      replaceState(state);\r\n    }\r\n  });\r\n}\r\n","import { actionOnSymbol } from './constants';\r\n\r\nexport function createActionCreator(def, _r) {\r\n  function actionCreator(payload) {\r\n    const action = {\r\n      type: def.meta.type,\r\n      payload,\r\n      config: def.config,\r\n    };\r\n    if (def[actionOnSymbol] && def.meta.resolvedTargets) {\r\n      payload.resolvedTargets = [...def.meta.resolvedTargets];\r\n    }\r\n    return _r.dispatch(action);\r\n  }\r\n\r\n  // We bind the types to the creator for easy reference by consumers\r\n  actionCreator.type = def.meta.type;\r\n\r\n  return actionCreator;\r\n}\r\n","import { thunkOnSymbol } from './constants';\r\nimport { get, isPromise } from './lib';\r\n\r\nexport function createThunkHandler(def, _r, injections, _aC) {\r\n  return (payload, fail) => {\r\n    const helpers = {\r\n      dispatch: _r.dispatch,\r\n      fail,\r\n      getState: () => get(def.meta.parent, _r.getState()),\r\n      getStoreActions: () => _aC,\r\n      getStoreState: _r.getState,\r\n      injections,\r\n      meta: {\r\n        key: def.meta.actionName,\r\n        parent: def.meta.parent,\r\n        path: def.meta.path,\r\n      },\r\n    };\r\n    if (def[thunkOnSymbol] && def.meta.resolvedTargets) {\r\n      payload.resolvedTargets = [...def.meta.resolvedTargets];\r\n    }\r\n    return def.fn(get(def.meta.parent, _aC), payload, helpers);\r\n  };\r\n}\r\n\r\nconst logThunkEventListenerError = (type, err) => {\r\n  // eslint-disable-next-line no-console\r\n  console.log(`Error in ${type}`);\r\n  // eslint-disable-next-line no-console\r\n  console.log(err);\r\n};\r\n\r\nconst handleEventDispatchErrors =\r\n  (type, dispatcher) =>\r\n  (...args) => {\r\n    try {\r\n      const result = dispatcher(...args);\r\n      if (isPromise(result)) {\r\n        result.catch((err) => {\r\n          logThunkEventListenerError(type, err);\r\n        });\r\n      }\r\n    } catch (err) {\r\n      logThunkEventListenerError(type, err);\r\n    }\r\n  };\r\n\r\nexport function createThunkActionsCreator(def, _r) {\r\n  const actionCreator = (payload) => {\r\n    const dispatchStart = handleEventDispatchErrors(def.meta.startType, () =>\r\n      _r.dispatch({\r\n        type: def.meta.startType,\r\n        payload,\r\n      }),\r\n    );\r\n\r\n    const dispatchFail = handleEventDispatchErrors(def.meta.failType, (err) =>\r\n      _r.dispatch({\r\n        type: def.meta.failType,\r\n        payload,\r\n        error: err,\r\n      }),\r\n    );\r\n\r\n    const dispatchSuccess = handleEventDispatchErrors(\r\n      def.meta.successType,\r\n      (result) =>\r\n        _r.dispatch({\r\n          type: def.meta.successType,\r\n          payload,\r\n          result,\r\n        }),\r\n    );\r\n\r\n    dispatchStart();\r\n\r\n    let failure = null;\r\n\r\n    const fail = (_failure) => {\r\n      failure = _failure || new Error();\r\n    };\r\n\r\n    const result = _r.dispatch(() => def.thunkHandler(payload, fail));\r\n\r\n    if (isPromise(result)) {\r\n      return result.then((resolved) => {\r\n        if (failure) {\r\n          dispatchFail(failure);\r\n        } else {\r\n          dispatchSuccess(resolved);\r\n        }\r\n        return resolved;\r\n      });\r\n    }\r\n\r\n    if (failure) {\r\n      dispatchFail(failure);\r\n    } else {\r\n      dispatchSuccess(result);\r\n    }\r\n\r\n    return result;\r\n  };\r\n\r\n  actionCreator.type = def.meta.type;\r\n  actionCreator.successType = def.meta.successType;\r\n  actionCreator.failType = def.meta.failType;\r\n  actionCreator.startType = def.meta.startType;\r\n\r\n  return actionCreator;\r\n}\r\n","import { get } from './lib';\r\n\r\nexport function createListenerMiddleware(_r) {\r\n  return () => (next) => (action) => {\r\n    const result = next(action);\r\n    if (\r\n      action &&\r\n      _r._i._lAM[action.type] &&\r\n      _r._i._lAM[action.type].length > 0\r\n    ) {\r\n      const sourceAction = _r._i._aCD[action.type];\r\n      _r._i._lAM[action.type].forEach((actionCreator) => {\r\n        actionCreator({\r\n          type: sourceAction ? sourceAction.def.meta.type : action.type,\r\n          payload: action.payload,\r\n          error: action.error,\r\n          result: action.result,\r\n        });\r\n      });\r\n    }\r\n    return result;\r\n  };\r\n}\r\n\r\nexport function bindListenerdefs(listenerdefs, _aC, _aCD, _lAM) {\r\n  listenerdefs.forEach((def) => {\r\n    const targets = def.targetResolver(get(def.meta.parent, _aC), _aC);\r\n\r\n    const targetTypes = (Array.isArray(targets) ? targets : [targets]).reduce(\r\n      (acc, target) => {\r\n        if (\r\n          typeof target === 'function' &&\r\n          target.def.meta.type &&\r\n          _aCD[target.def.meta.type]\r\n        ) {\r\n          if (target.def.meta.successType) {\r\n            acc.push(target.def.meta.successType);\r\n          } else {\r\n            acc.push(target.def.meta.type);\r\n          }\r\n        } else if (typeof target === 'string') {\r\n          acc.push(target);\r\n        }\r\n        return acc;\r\n      },\r\n      [],\r\n    );\r\n\r\n    def.meta.resolvedTargets = targetTypes;\r\n\r\n    targetTypes.forEach((targetType) => {\r\n      const listenerReg = _lAM[targetType] || [];\r\n      listenerReg.push(_aCD[def.meta.type]);\r\n      _lAM[targetType] = listenerReg;\r\n    });\r\n  });\r\n}\r\n","import equal from 'fast-deep-equal/es6';\r\nimport { areInputsEqual } from './lib';\r\n\r\nexport function createComputedPropertyBinder(key, def, _r) {\r\n  let hasRunOnce = false;\r\n  let prevInputs = [];\r\n  let prevValue;\r\n  let prevStoreState;\r\n\r\n  let performingEqualityCheck = false;\r\n\r\n  const areEqual = (a, b) => {\r\n    performingEqualityCheck = true;\r\n    const result = equal(a, b);\r\n    performingEqualityCheck = false;\r\n    return result;\r\n  };\r\n\r\n  return function createComputedProperty(parentState, storeState) {\r\n    Object.defineProperty(parentState, key, {\r\n      configurable: true,\r\n      enumerable: true,\r\n      get: () => {\r\n        if (performingEqualityCheck) {\r\n          return prevValue;\r\n        }\r\n\r\n        const inputs = def.stateResolvers.map((resolver) =>\r\n          resolver(parentState, storeState),\r\n        );\r\n\r\n        if (\r\n          hasRunOnce &&\r\n          ((storeState === prevStoreState &&\r\n            areInputsEqual(inputs, prevInputs)) ||\r\n            // We don't want computed properties resolved every time an action\r\n            // is handled by the reducer. They need to remain lazy, only being\r\n            // computed when used by a component or getState call;\r\n            (_r._i._cS.isInReducer &&\r\n              // This is to account for strange errors that may occur via immer;\r\n              new Error().stack.match(/shallowCopy/gi) !== null))\r\n        ) {\r\n          return prevValue;\r\n        }\r\n\r\n        const newValue = def.fn(...inputs);\r\n        if (!areEqual(newValue, prevValue)) {\r\n          prevValue = newValue;\r\n        }\r\n\r\n        prevInputs = inputs;\r\n        prevStoreState = storeState;\r\n        hasRunOnce = true;\r\n        return prevValue;\r\n      },\r\n    });\r\n  };\r\n}\r\n\r\nexport function createComputedPropertiesMiddleware(_r) {\r\n  return () => (next) => (action) => {\r\n    _r._i._cS.isInReducer = true;\r\n    const result = next(action);\r\n    _r._i._cS.isInReducer = false;\r\n    return result;\r\n  };\r\n}\r\n","import { get, isPromise } from './lib';\r\n\r\nexport function createEffectsMiddleware(_r) {\r\n  return (store) => (next) => (action) => {\r\n    if (_r._i._e.length === 0) {\r\n      return next(action);\r\n    }\r\n    const prevState = store.getState();\r\n    const result = next(action);\r\n    const nextState = store.getState();\r\n    if (prevState !== nextState) {\r\n      _r._i._e.forEach((def) => {\r\n        const prevLocal = get(def.meta.parent, prevState);\r\n        const nextLocal = get(def.meta.parent, nextState);\r\n        const prevDependencies = def.dependencyResolvers.map((resolver) =>\r\n          resolver(prevLocal, prevState),\r\n        );\r\n        const nextDependencies = def.dependencyResolvers.map((resolver) =>\r\n          resolver(nextLocal, nextState),\r\n        );\r\n        const hasChanged = prevDependencies.some(\r\n          (dependency, idx) => dependency !== nextDependencies[idx],\r\n        );\r\n        if (hasChanged) {\r\n          def.actionCreator(prevDependencies, nextDependencies, action);\r\n        }\r\n      });\r\n    }\r\n    return result;\r\n  };\r\n}\r\n\r\nconst logEffectError = (err) => {\r\n  // As users can't get a handle on effects we need to report the error\r\n  // eslint-disable-next-line no-console\r\n  console.error(err);\r\n};\r\n\r\nexport function createEffectHandler(def, _r, injections, _aC) {\r\n  let dispose;\r\n\r\n  return (change) => {\r\n    const helpers = {\r\n      dispatch: _r.dispatch,\r\n      getState: () => get(def.meta.parent, _r.getState()),\r\n      getStoreActions: () => _aC,\r\n      getStoreState: _r.getState,\r\n      injections,\r\n      meta: {\r\n        key: def.meta.actionName,\r\n        parent: def.meta.parent,\r\n        path: def.meta.path,\r\n      },\r\n    };\r\n\r\n    if (dispose !== undefined) {\r\n      const disposeResult = dispose();\r\n      dispose = undefined;\r\n      if (isPromise(disposeResult)) {\r\n        disposeResult.catch(logEffectError);\r\n      }\r\n    }\r\n\r\n    const actions = get(def.meta.parent, _aC);\r\n    const effectResult = def.fn(actions, change, helpers);\r\n\r\n    if (isPromise(effectResult)) {\r\n      return effectResult.then((resolved) => {\r\n        if (typeof resolved === 'function') {\r\n          if (process.env.NODE_ENV !== 'production') {\r\n            // Dispose functions are not allowed to be resolved asynchronously.\r\n            // Doing so would provide inconsistent behaviour around their execution.\r\n            // eslint-disable-next-line no-console\r\n            console.warn(\r\n              '[easy-peasy] Effect is asynchronously resolving a dispose fn.',\r\n            );\r\n          }\r\n        }\r\n      });\r\n    }\r\n\r\n    if (typeof effectResult === 'function') {\r\n      dispose = effectResult;\r\n    }\r\n\r\n    return undefined;\r\n  };\r\n}\r\n\r\nconst logEffectEventListenerError = (type, err) => {\r\n  // eslint-disable-next-line no-console\r\n  console.log(`Error in ${type}`);\r\n  // eslint-disable-next-line no-console\r\n  console.log(err);\r\n};\r\n\r\nconst handleEventDispatchErrors =\r\n  (type, dispatcher) =>\r\n  (...args) => {\r\n    try {\r\n      const result = dispatcher(...args);\r\n      if (isPromise(result)) {\r\n        result.catch((err) => {\r\n          logEffectEventListenerError(type, err);\r\n        });\r\n      }\r\n    } catch (err) {\r\n      logEffectEventListenerError(type, err);\r\n    }\r\n  };\r\n\r\nexport function createEffectActionsCreator(def, _r, effectHandler) {\r\n  const actionCreator = (previousDependencies, nextDependencies, action) => {\r\n    const change = {\r\n      prev: previousDependencies,\r\n      current: nextDependencies,\r\n      action,\r\n    };\r\n\r\n    const dispatchStart = handleEventDispatchErrors(def.meta.startType, () =>\r\n      _r.dispatch({\r\n        type: def.meta.startType,\r\n        change,\r\n      }),\r\n    );\r\n\r\n    const dispatchSuccess = handleEventDispatchErrors(\r\n      def.meta.successType,\r\n      () =>\r\n        _r.dispatch({\r\n          type: def.meta.successType,\r\n          change,\r\n        }),\r\n    );\r\n\r\n    dispatchStart();\r\n\r\n    try {\r\n      const result = _r.dispatch(() => effectHandler(change));\r\n\r\n      if (isPromise(result)) {\r\n        return result.then((resolved) => {\r\n          dispatchSuccess(resolved);\r\n          return resolved;\r\n        }, logEffectError);\r\n      }\r\n\r\n      dispatchSuccess(result);\r\n\r\n      return result;\r\n    } catch (err) {\r\n      logEffectError(err);\r\n    }\r\n\r\n    return undefined;\r\n  };\r\n\r\n  actionCreator.type = def.meta.type;\r\n  actionCreator.startType = def.meta.startType;\r\n  actionCreator.successType = def.meta.successType;\r\n  actionCreator.failType = def.meta.failType;\r\n\r\n  return actionCreator;\r\n}\r\n","import {\r\n  actionOnSymbol,\r\n  actionSymbol,\r\n  computedSymbol,\r\n  effectOnSymbol,\r\n  persistSymbol,\r\n  reducerSymbol,\r\n  thunkOnSymbol,\r\n  thunkSymbol,\r\n} from './constants';\r\nimport { get, isPlainObject, set } from './lib';\r\nimport { extractPersistConfig } from './persistence';\r\nimport { createActionCreator } from './actions';\r\nimport { createThunkHandler, createThunkActionsCreator } from './thunks';\r\nimport { bindListenerdefs } from './listeners';\r\nimport { createComputedPropertyBinder } from './computed-properties';\r\nimport { createEffectHandler, createEffectActionsCreator } from './effects';\r\n\r\nexport default function extractDataFromModel(\r\n  model,\r\n  initialState,\r\n  injections,\r\n  _r,\r\n) {\r\n  const _dS = initialState;\r\n  const _aCD = {};\r\n  const _aC = {};\r\n  const _aRD = {};\r\n  const actionThunks = {};\r\n  const _cP = [];\r\n  const _cR = [];\r\n  const _e = [];\r\n  const _lAC = {};\r\n  const _lAM = {};\r\n  const listenerdefs = [];\r\n  let _persistenceConfig = [];\r\n  const _cS = {\r\n    isInReducer: false,\r\n  };\r\n\r\n  const recursiveExtractFromModel = (current, parentPath) =>\r\n    Object.keys(current).forEach((key) => {\r\n      const value = current[key];\r\n      const path = [...parentPath, key];\r\n      const meta = {\r\n        parent: parentPath,\r\n        path,\r\n        key,\r\n      };\r\n      const handleValueAsState = () => {\r\n        const initialParentRef = get(parentPath, initialState);\r\n        if (initialParentRef && key in initialParentRef) {\r\n          set(path, _dS, initialParentRef[key]);\r\n        } else {\r\n          set(path, _dS, value);\r\n        }\r\n      };\r\n\r\n      if (key === persistSymbol) {\r\n        _persistenceConfig.push(extractPersistConfig(parentPath, value));\r\n        return;\r\n      }\r\n\r\n      if (value != null && typeof value === 'object') {\r\n        if (value[actionSymbol] || value[actionOnSymbol]) {\r\n          const def = { ...value };\r\n\r\n          // Determine the category of the action\r\n          const category = def[actionSymbol] ? '@action' : '@actionOn';\r\n\r\n          // Establish the meta data describing the action\r\n          def.meta = {\r\n            actionName: meta.key,\r\n            category,\r\n            type: `${category}.${meta.path.join('.')}`,\r\n            parent: meta.parent,\r\n            path: meta.path,\r\n          };\r\n\r\n          // Create the \"action creator\" function\r\n          def.actionCreator = createActionCreator(def, _r);\r\n\r\n          // Create a bidirectional relationship of the def/actionCreator\r\n          def.actionCreator.def = def;\r\n\r\n          // Create a bidirectional relationship of the def/reducer\r\n          def.fn.def = def;\r\n\r\n          // Add the action creator to lookup map\r\n          _aCD[def.meta.type] = def.actionCreator;\r\n\r\n          // Add the reducer to lookup map\r\n          _aRD[def.meta.type] = def.fn;\r\n\r\n          // We don't want to expose the internal action to consumers\r\n          if (meta.key !== 'ePRS') {\r\n            // Set the action creator in the \"actions\" object tree for\r\n            // either the listeners object tree, or the standard actions/thunks\r\n            // object tree\r\n            if (def[actionOnSymbol]) {\r\n              listenerdefs.push(def);\r\n              set(path, _lAC, def.actionCreator);\r\n            } else {\r\n              set(path, _aC, def.actionCreator);\r\n            }\r\n          }\r\n        } else if (value[thunkSymbol] || value[thunkOnSymbol]) {\r\n          const def = { ...value };\r\n\r\n          // Determine the category of the thunk\r\n          const category = def[thunkSymbol] ? '@thunk' : '@thunkOn';\r\n\r\n          // Establish the meta data describing the thunk\r\n          const type = `${category}.${meta.path.join('.')}`;\r\n          def.meta = {\r\n            actionName: meta.key,\r\n            parent: meta.parent,\r\n            path: meta.path,\r\n            type,\r\n            startType: `${type}(start)`,\r\n            successType: `${type}(success)`,\r\n            failType: `${type}(fail)`,\r\n          };\r\n\r\n          // Create the function that will handle, i.e. be executed, when\r\n          // the thunk action is created/dispatched\r\n          def.thunkHandler = createThunkHandler(def, _r, injections, _aC);\r\n\r\n          // Register the thunk handler\r\n          set(path, actionThunks, def.thunkHandler);\r\n\r\n          // Create the \"action creator\" function\r\n          def.actionCreator = createThunkActionsCreator(def, _r);\r\n\r\n          // Create a bidirectional relationship of the def/actionCreator\r\n          def.actionCreator.def = def;\r\n\r\n          // Register the action creator within the lookup map\r\n          _aCD[def.meta.type] = def.actionCreator;\r\n\r\n          // Set the action creator in the \"actions\" object tree for\r\n          // either the listeners object tree, or the standard actions/thunks\r\n          // object tree\r\n          if (def[thunkOnSymbol]) {\r\n            listenerdefs.push(def);\r\n            set(path, _lAC, def.actionCreator);\r\n          } else {\r\n            set(path, _aC, def.actionCreator);\r\n          }\r\n        } else if (value[computedSymbol]) {\r\n          const parent = get(parentPath, _dS);\r\n          const bindComputedProperty = createComputedPropertyBinder(\r\n            key,\r\n            value,\r\n            _r,\r\n          );\r\n          bindComputedProperty(parent, _dS);\r\n          _cP.push({ key, parentPath, bindComputedProperty });\r\n        } else if (value[reducerSymbol]) {\r\n          _cR.push({\r\n            key,\r\n            parentPath,\r\n            reducer: value.fn,\r\n            config: value.config,\r\n          });\r\n        } else if (value[effectOnSymbol]) {\r\n          const def = { ...value };\r\n\r\n          // Establish the meta data describing the effect\r\n          const type = `@effectOn.${meta.path.join('.')}`;\r\n          def.meta = {\r\n            type,\r\n            actionName: meta.key,\r\n            parent: meta.parent,\r\n            path: meta.path,\r\n            startType: `${type}(start)`,\r\n            successType: `${type}(success)`,\r\n            failType: `${type}(fail)`,\r\n          };\r\n\r\n          const effectHandler = createEffectHandler(def, _r, injections, _aC);\r\n\r\n          const actionCreator = createEffectActionsCreator(\r\n            def,\r\n            _r,\r\n            effectHandler,\r\n          );\r\n\r\n          def.actionCreator = actionCreator;\r\n\r\n          _e.push(def);\r\n        } else if (isPlainObject(value)) {\r\n          const existing = get(path, _dS);\r\n          if (existing == null) {\r\n            set(path, _dS, {});\r\n          }\r\n          recursiveExtractFromModel(value, path);\r\n        } else {\r\n          handleValueAsState();\r\n        }\r\n      } else {\r\n        handleValueAsState();\r\n      }\r\n    });\r\n\r\n  _persistenceConfig = _persistenceConfig.sort((a, b) => {\r\n    const aPath = a.path.join('.');\r\n    const bPath = b.path.join('.');\r\n    if (aPath < bPath) {\r\n      return -1;\r\n    }\r\n    if (aPath > bPath) {\r\n      return 1;\r\n    }\r\n    return 0;\r\n  });\r\n\r\n  recursiveExtractFromModel(model, []);\r\n\r\n  bindListenerdefs(listenerdefs, _aC, _aCD, _lAM);\r\n\r\n  return {\r\n    _aCD,\r\n    _aC,\r\n    _aRD,\r\n    _cP,\r\n    _cR,\r\n    _cS,\r\n    _dS,\r\n    _e,\r\n    _lAC,\r\n    _lAM,\r\n    _persistenceConfig,\r\n  };\r\n}\r\n","import {\r\n  applyMiddleware,\r\n  compose as reduxCompose,\r\n  createStore as reduxCreateStore,\r\n} from 'redux';\r\nimport reduxThunk from 'redux-thunk';\r\nimport * as helpers from './helpers';\r\nimport createReducer from './create-reducer';\r\nimport extractDataFromModel from './extract-data-from-model';\r\nimport {\r\n  createPersistor,\r\n  createPersistMiddleware,\r\n  rehydrateStateFromPersistIfNeeded,\r\n} from './persistence';\r\nimport { createComputedPropertiesMiddleware } from './computed-properties';\r\nimport { createListenerMiddleware } from './listeners';\r\nimport { clone } from './lib';\r\nimport { createEffectsMiddleware } from './effects';\r\n\r\nexport function createStore(model, options = {}) {\r\n  const modelClone = clone(model);\r\n  const {\r\n    compose,\r\n    devTools = process.env.NODE_ENV !== 'production',\r\n    disableImmer = false,\r\n    enhancers = [],\r\n    initialState = undefined,\r\n    injections = {},\r\n    middleware = [],\r\n    mockActions = false,\r\n    name: storeName = `EasyPeasyStore`,\r\n    version = 0,\r\n    reducerEnhancer = (rootReducer) => rootReducer,\r\n  } = options;\r\n\r\n  const bindReplaceState = (modelDef) => ({\r\n    ...modelDef,\r\n    ePRS: helpers.action((_, payload) => payload),\r\n  });\r\n\r\n  const _r = {};\r\n\r\n  let modeldef = bindReplaceState(modelClone);\r\n  let mockedActions = [];\r\n\r\n  const persistKey = (targetPath) =>\r\n    `[${storeName}][${version}]${\r\n      targetPath.length > 0 ? `[${targetPath.join('.')}]` : ''\r\n    }`;\r\n  const persistor = createPersistor(persistKey, _r);\r\n  const persistMiddleware = createPersistMiddleware(persistor, _r);\r\n\r\n  const replaceState = (nextState) => _r._i._aCD['@action.ePRS'](nextState);\r\n\r\n  const bindStoreInternals = (state = {}) => {\r\n    const data = extractDataFromModel(modeldef, state, injections, _r);\r\n    _r._i = {\r\n      ...data,\r\n      reducer: reducerEnhancer(\r\n        createReducer(disableImmer, data._aRD, data._cR, data._cP),\r\n      ),\r\n    };\r\n  };\r\n\r\n  const mockActionsMiddleware = () => () => (action) => {\r\n    if (action != null) {\r\n      mockedActions.push(action);\r\n    }\r\n    return undefined;\r\n  };\r\n\r\n  const devToolConfig = devTools === true ? {} : devTools;\r\n\r\n  const composeEnhancers =\r\n    compose ||\r\n    (devTools &&\r\n    typeof window !== 'undefined' &&\r\n    window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__\r\n      ? window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({\r\n          name: storeName,\r\n          ...devToolConfig,\r\n        })\r\n      : reduxCompose);\r\n\r\n  bindStoreInternals(initialState || {});\r\n\r\n  const easyPeasyMiddleware = [\r\n    createComputedPropertiesMiddleware(_r),\r\n    ...middleware,\r\n    reduxThunk,\r\n    createListenerMiddleware(_r),\r\n    createEffectsMiddleware(_r),\r\n    persistMiddleware,\r\n  ];\r\n\r\n  if (mockActions) {\r\n    easyPeasyMiddleware.push(mockActionsMiddleware);\r\n  }\r\n\r\n  const store = reduxCreateStore(\r\n    _r._i.reducer,\r\n    _r._i._dS,\r\n    composeEnhancers(applyMiddleware(...easyPeasyMiddleware), ...enhancers),\r\n  );\r\n\r\n  store.subscribe(() => {\r\n    _r._i._cS.isInReducer = false;\r\n  });\r\n\r\n  _r.dispatch = store.dispatch;\r\n  _r.getState = store.getState;\r\n\r\n  const bindActionCreators = () => {\r\n    Object.keys(store.dispatch).forEach((actionsKey) => {\r\n      delete store.dispatch[actionsKey];\r\n    });\r\n    Object.keys(_r._i._aC).forEach((key) => {\r\n      store.dispatch[key] = _r._i._aC[key];\r\n    });\r\n  };\r\n\r\n  bindActionCreators();\r\n\r\n  const rebindStore = (removeKey) => {\r\n    const currentState = store.getState();\r\n    if (removeKey) {\r\n      delete currentState[removeKey];\r\n    }\r\n    bindStoreInternals(currentState);\r\n    store.replaceReducer(_r._i.reducer);\r\n    replaceState(_r._i._dS);\r\n    bindActionCreators();\r\n  };\r\n\r\n  const resolveRehydration = rehydrateStateFromPersistIfNeeded(\r\n    persistKey,\r\n    replaceState,\r\n    _r,\r\n  );\r\n\r\n  return Object.assign(store, {\r\n    addModel: (key, modelForKey) => {\r\n      if (modeldef[key] && process.env.NODE_ENV !== 'production') {\r\n        store.removeModel(key);\r\n      }\r\n      modeldef[key] = modelForKey;\r\n      rebindStore();\r\n      // There may have been persisted state for a dynamic model. We should try\r\n      // and rehydrate the specifc node\r\n      const addModelRehydration = rehydrateStateFromPersistIfNeeded(\r\n        persistKey,\r\n        replaceState,\r\n        _r,\r\n        key,\r\n      );\r\n      return {\r\n        resolveRehydration: () => addModelRehydration,\r\n      };\r\n    },\r\n    clearMockedActions: () => {\r\n      mockedActions = [];\r\n    },\r\n    getActions: () => _r._i._aC,\r\n    getListeners: () => _r._i._lAC,\r\n    getMockedActions: () => [...mockedActions],\r\n    persist: {\r\n      clear: persistor.clear,\r\n      flush: persistor.flush,\r\n      resolveRehydration: () => resolveRehydration,\r\n    },\r\n    reconfigure: (newModel) => {\r\n      modeldef = bindReplaceState(newModel);\r\n      rebindStore();\r\n    },\r\n    removeModel: (key) => {\r\n      if (!modeldef[key]) {\r\n        return;\r\n      }\r\n      delete modeldef[key];\r\n      rebindStore(key);\r\n    },\r\n  });\r\n}\r\n","/* eslint-disable react/prop-types */\r\n\r\nimport React, { createContext, useContext } from 'react';\r\nimport {\r\n  createStoreActionsHook,\r\n  createStoreDispatchHook,\r\n  createStoreStateHook,\r\n  createStoreRehydratedHook,\r\n} from './hooks';\r\nimport { createStore } from './create-store';\r\nimport { useMemoOne } from './lib';\r\n\r\nexport function createContextStore(model, config = {}) {\r\n  // We create a mutable injections reference to allow updating it\r\n  const { injections: mutableInjections = {} } = config;\r\n\r\n  const StoreContext = createContext();\r\n\r\n  function Provider({ children, runtimeModel, injections }) {\r\n    // If the user provided injections we need to ensure our mutable ref\r\n    // is up to date. We could consider doing a shallow compare here?\r\n    if (injections != null) {\r\n      const nextInjections =\r\n        typeof injections === 'function'\r\n          ? injections(mutableInjections)\r\n          : injections;\r\n      const nextKeys = Object.keys(nextInjections);\r\n      const removeKeys = Object.keys(mutableInjections).filter(\r\n        (k) => !nextKeys.includes(k),\r\n      );\r\n      removeKeys.forEach((k) => {\r\n        delete mutableInjections[k];\r\n      });\r\n      Object.assign(mutableInjections, nextInjections);\r\n    }\r\n\r\n    const store = useMemoOne(\r\n      () =>\r\n        createStore(typeof model === 'function' ? model(runtimeModel) : model, {\r\n          ...config,\r\n          originalInjections: mutableInjections,\r\n        }),\r\n      [],\r\n    );\r\n    return (\r\n      <StoreContext.Provider value={store}>{children}</StoreContext.Provider>\r\n    );\r\n  }\r\n\r\n  function useStore() {\r\n    return useContext(StoreContext);\r\n  }\r\n\r\n  return {\r\n    Provider,\r\n    useStore,\r\n    useStoreState: createStoreStateHook(StoreContext),\r\n    useStoreActions: createStoreActionsHook(StoreContext),\r\n    useStoreDispatch: createStoreDispatchHook(StoreContext),\r\n    useStoreRehydrated: createStoreRehydratedHook(StoreContext),\r\n  };\r\n}\r\n","/**\r\n * This file has been copied from redux-persist.\r\n * The intention being to support as much of the redux-persist API as possible.\r\n */\r\n\r\nexport function createTransform(inbound, outbound, config = {}) {\r\n  const whitelist = config.whitelist || null;\r\n  const blacklist = config.blacklist || null;\r\n\r\n  function whitelistBlacklistCheck(key) {\r\n    if (whitelist && whitelist.indexOf(key) === -1) return true;\r\n    if (blacklist && blacklist.indexOf(key) !== -1) return true;\r\n    return false;\r\n  }\r\n\r\n  return {\r\n    in: (data, key, fullState) =>\r\n      !whitelistBlacklistCheck(key) && inbound\r\n        ? inbound(data, key, fullState)\r\n        : data,\r\n    out: (data, key, fullState) =>\r\n      !whitelistBlacklistCheck(key) && outbound\r\n        ? outbound(data, key, fullState)\r\n        : data,\r\n  };\r\n}\r\n","/* eslint-disable react/prop-types */\r\n\r\nimport React from 'react';\r\nimport StoreContext from './context';\r\n\r\nexport function StoreProvider({ children, store }) {\r\n  return (\r\n    <StoreContext.Provider value={store}>{children}</StoreContext.Provider>\r\n  );\r\n}\r\n","import { useEffect, useRef, useState } from 'react';\r\nimport { useMemoOne } from './lib';\r\nimport { createStore } from './create-store';\r\n\r\nexport function useLocalStore(\r\n  modelCreator,\r\n  dependencies = [],\r\n  configCreator = null,\r\n) {\r\n  const storeRef = useRef();\r\n\r\n  const configRef = useRef();\r\n\r\n  const store = useMemoOne(() => {\r\n    const previousState =\r\n      storeRef.current != null ? storeRef.current.getState() : undefined;\r\n    const config =\r\n      configCreator != null\r\n        ? configCreator(previousState, configRef.current)\r\n        : undefined;\r\n    const _store = createStore(modelCreator(previousState), config);\r\n    configRef.current = config;\r\n    storeRef.current = _store;\r\n    return _store;\r\n  }, dependencies);\r\n\r\n  const [currentState, setCurrentState] = useState(() => store.getState());\r\n\r\n  useEffect(() => {\r\n    setCurrentState(store.getState());\r\n    store.subscribe(() => {\r\n      const nextState = store.getState();\r\n      if (currentState !== nextState) {\r\n        setCurrentState(nextState);\r\n      }\r\n    });\r\n  }, [store]);\r\n\r\n  return [currentState, store.getActions(), store];\r\n}\r\n","// React 18 requires the use of the useSyncExternalStore hook for external\r\n// stores to hook into its concurrent features. We want to continue supporting\r\n// older versions of React (16/17), so we are utilsing a shim provided by the\r\n// React team which will ensure backwards compatibility;\r\n// eslint-disable-next-line import/no-unresolved\r\nimport { useSyncExternalStoreWithSelector } from 'use-sync-external-store/shim/with-selector';\r\n\r\nimport { initializeUseStoreState } from './hooks';\r\n\r\ninitializeUseStoreState(useSyncExternalStoreWithSelector);\r\n\r\nexport * from './hooks';\r\nexport * from './create-store';\r\nexport * from './create-context-store';\r\nexport * from './create-transform';\r\nexport * from './provider';\r\nexport * from './use-local-store';\r\nexport * from './helpers';\r\n"],"names":["StoreContext","createContext","useNotInitialized","Error","useSyncExternalStoreWithSelector","initializeUseStoreState","fn","refEquality","a","b","createStoreStateHook","Context","useStoreState","mapState","equalityFn","process","env","NODE_ENV","store","useContext","selectedState","subscribe","getState","useDebugValue","EasyPeasyContext","createStoreActionsHook","useStoreActions","mapActions","getActions","createStoreDispatchHook","useStoreDispatch","dispatch","useStore","createStoreRehydratedHook","useStoreRehydrated","_useState","useState","rehydrated","setRehydrated","useEffect","persist","resolveRehydration","then","createTypedHooks","actionSymbol","actionOnSymbol","computedSymbol","effectOnSymbol","persistSymbol","reducerSymbol","thunkOnSymbol","thunkSymbol","debug","state","isDraft","current","actionOn","targetResolver","config","_ref","action","_ref2","defaultStateResolvers","computed","fnOrStateResolvers","_ref4","_ref3","stateResolvers","effectOn","dependencyResolvers","_ref5","generic","value","model","_objectSpread2","window","_objectSpread","thunkOn","_ref6","thunk","_ref7","reducer","_ref8","easyPeasyImmer","isPlainObject","obj","proto","Object","getPrototypeOf","clone","source","recursiveClone","next","keys","reduce","acc","key","getOwnPropertyDescriptor","get","forEach","isPromise","x","path","target","cur","undefined","newify","currentPath","currentState","finalValue","length","newState","slice","set","idx","createSimpleProduce","disableImmer","simpleProduce","immer","Immer","useProxies","Proxy","revocable","Reflect","autoFreeze","draft","createDraft","result","finishDraft","parentPath","parent","pReduce","iterable","initialValue","Promise","resolve","reject","iterator","Symbol","index","total","element","done","all","catch","err","pSeries","tasks","results","_","task","push","areInputsEqual","newInputs","lastInputs","i","useMemoOne","getResult","inputs","initial","React","committed","useRef","isInputMatch","Boolean","cache","createReducer","_aRD","_cR","_cP","runActionReducerAtPath","actionReducer","payload","reducerForActions","type","def","meta","reducerForCustomReducers","original","rootReducer","stateAfterActions","bindComputedProperty","parentState","migrate","data","migrations","_data$_migrationVersi","setAutoFreeze","version","_migrationVersion","toVersion","migrationVersion","nextVersion","migrator","produce","noopStorage","getItem","setItem","removeItem","getBrowerStorage","storageName","storageCache","localStorage","sessionStorage","createStorageWrapper","storage","transformers","console","warn","outTransformers","concat","reverse","serialize","in","JSON","stringify","deserialize","storageData","parse","hasMigrations","out","isAsync","wrapped","extractPersistConfig","persistdef","allow","deny","mergeStrategy","resolvePersistTargets","targets","findIndex","createPersistenceClearer","persistKey","_r","_i","_persistenceConfig","map","createPersistor","persistPromise","isPersisting","nextPersistOperation","timingMethod","requestIdleCallback","timeout","requestAnimationFrame","nextState","operation","persistRootState","persistTargets","stateToPersist","targetPath","rawValue","finally","clear","flush","createPersistMiddleware","persistor","rehydrateStateFromPersistIfNeeded","replaceState","root","_dS","rehydrating","persistInstance","hasDataModelChanged","dataModel","rehydratingModelData","Array","isArray","applyRehydrationStrategy","persistedState","targetState","setAt","currentTargetState","currentPersistedState","rehydate","getItemResult","createActionCreator","actionCreator","resolvedTargets","createThunkHandler","injections","_aC","fail","helpers","getStoreActions","getStoreState","actionName","logThunkEventListenerError","log","handleEventDispatchErrors","dispatcher","apply","arguments","createThunkActionsCreator","dispatchStart","startType","dispatchFail","failType","error","dispatchSuccess","successType","failure","_failure","thunkHandler","resolved","createListenerMiddleware","_lAM","sourceAction","_aCD","bindListenerdefs","listenerdefs","targetTypes","targetType","listenerReg","createComputedPropertyBinder","hasRunOnce","prevInputs","prevValue","prevStoreState","performingEqualityCheck","areEqual","equal","createComputedProperty","storeState","defineProperty","configurable","enumerable","resolver","_cS","isInReducer","stack","match","newValue","createComputedPropertiesMiddleware","createEffectsMiddleware","_e","prevState","prevLocal","nextLocal","prevDependencies","nextDependencies","hasChanged","some","dependency","logEffectError","createEffectHandler","dispose","change","disposeResult","actions","effectResult","logEffectEventListenerError","createEffectActionsCreator","effectHandler","previousDependencies","prev","extractDataFromModel","initialState","actionThunks","_lAC","recursiveExtractFromModel","handleValueAsState","initialParentRef","category","join","existing","sort","aPath","bPath","createStore","options","modelClone","_options","compose","_options$devTools","devTools","_options$disableImmer","_options$enhancers","enhancers","_options$initialState","_options$injections","_options$middleware","middleware","_options$mockActions","mockActions","_options$name","name","storeName","_options$version","_options$reducerEnhan","reducerEnhancer","bindReplaceState","modelDef","ePRS","modeldef","mockedActions","persistMiddleware","bindStoreInternals","mockActionsMiddleware","devToolConfig","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","reduxCompose","easyPeasyMiddleware","reduxThunk","reduxCreateStore","applyMiddleware","bindActionCreators","actionsKey","rebindStore","removeKey","replaceReducer","assign","addModel","modelForKey","removeModel","addModelRehydration","clearMockedActions","getListeners","getMockedActions","reconfigure","newModel","createContextStore","_config","_config$injections","mutableInjections","Provider","children","runtimeModel","nextInjections","nextKeys","removeKeys","filter","k","includes","originalInjections","createElement","createTransform","inbound","outbound","whitelist","blacklist","whitelistBlacklistCheck","indexOf","_in","fullState","StoreProvider","useLocalStore","modelCreator","dependencies","configCreator","storeRef","configRef","previousState","_store","setCurrentState"],"mappings":"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"}